var F=Object.defineProperty,M=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var $=(n,t,a)=>t in n?F(n,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[t]=a,C=(n,t)=>{for(var a in t||(t={}))E.call(t,a)&&$(n,a,t[a]);if(T)for(var a of T(t))P.call(t,a)&&$(n,a,t[a]);return n},B=(n,t)=>M(n,O(t));import{_ as b,c as x,o as c,a as p,w as l,b as r,d as V,t as m,u,V as U,e as v,f as q,g as J,h as K,i as R,j as G,k as H,l as h,r as N,m as S,v as j,n as Q,F as I,p as k,q as W,s as D,x as X,y as Y,z as Z,A as tt,B as et,K as st,C as at,D as ot,E as lt,G as nt,H as A,I as it,J as rt}from"./index.3ddb0175.js";import{M as ct}from"./index.5bad56d8.js";import{g as ut}from"./home.7b2f5623.js";import"./request.304a15fc.js";const dt={class:"",style:{flex:"1"}},_t={class:"text-overline mb-4"},pt={name:"TaskListItem"},ft=Object.assign(pt,{props:{item:{type:Object,required:!0}},emits:["click-item"],setup(n,{emit:t}){const a=n,s=x(()=>a.item);return(d,_)=>(c(),p(R,{color:u(s).color,onClick:_[0]||(_[0]=y=>t("click-item",u(s)))},{default:l(()=>[r(K,{"three-line":"",class:"d-flex text-white"},{default:l(()=>[V("div",dt,[V("div",_t,"DUE: "+m(u(s).dueAt),1),r(U,{class:"text-h5 mb-1",style:{flex:"1"}},{default:l(()=>[v(m(u(s).agentName),1)]),_:1}),r(q,null,{default:l(()=>[v(m(u(s).locLat)+"/"+m(u(s).locLng),1)]),_:1})]),r(J,{size:"100",class:"text-white"},{default:l(()=>[v(m(u(s).category.toUpperCase()),1)]),_:1})]),_:1})]),_:1},8,["color"]))}});var z=b(ft,[["__file","D:/tapp/ftma_app2/src/views/Tasks/listItem.vue"]]);const mt={name:"TaskList"},vt=Object.assign(mt,{props:{data:{type:Array,default:()=>[]}},setup(n){const t=n,a=G(),s=x(()=>t.data);function d(_){sessionStorage.setItem("item",JSON.stringify({mode:"readonly",category:_.category,id:_.taskId})),a.push(`/task/${_.taskId}`)}return(_,y)=>(c(),p(W,null,{default:l(()=>[u(s).length>0?(c(),p(H,{key:0,dense:""},{default:l(()=>[(c(!0),h(I,null,N(u(s),g=>S((c(),p(Q,{key:g.taskId,cols:"12"},{default:l(()=>[r(z,{item:g,onClickItem:d},null,8,["item"])]),_:2},1024)),[[j,g.status]])),128))]),_:1})):k("v-if",!0)]),_:1}))}});var gt=b(vt,[["__file","D:/tapp/ftma_app2/src/views/Tasks/list.vue"]]);const ht=v("My Tasks"),kt=v("mdi-magnify"),xt={class:"d-flex align-center justidy-start flex-wrap pl-4"},Vt=v(" mdi-checkbox-marked-circle "),yt={class:"text-white"},wt={key:0,class:"w-100 pa-2"},Ct={name:"Tasks"},It=Object.assign(Ct,{setup(n){const t=D(!1),a=x(()=>t.value?ct:gt),s=X({loading:!0,list:[]}),d=D(),_=x(()=>s.list.filter(o=>o.status));function y(o){for(const e in d.value)if(e===o){d.value[o].status=!d.value[o].status;break}s.list=s.list.map(e=>(e.color===o&&(e.status=d.value[o].status),e))}Y(async()=>{try{s.loading=!0;const o=await ut();s.list=o.map(e=>B(C(C({},e),g(e.locLat,e.locLng)),{id:e.taskId,status:!0})),d.value=o.reduce((e,i)=>{var f;return(f=e[i.color])!=null&&f.count?e[i.color].count++:e[i.color]={count:1,status:!0},e},{})}catch(o){console.log(o)}finally{s.loading=!1}});function g(o,e){const i=(w,L=4)=>parseFloat(parseFloat(w).toFixed(L));return{locLat:i(o,8),locLng:i(e,8)}}return(o,e)=>(c(),h(I,null,[r(Z,{dark:"",color:"green"},{default:l(()=>[r(ot),r(lt,null,{default:l(()=>[ht]),_:1}),r(nt,{icon:""},{default:l(()=>[r(A,null,{default:l(()=>[kt]),_:1})]),_:1})]),_:1}),V("div",xt,[d.value?(c(!0),h(I,{key:0},N(d.value,(i,f,w)=>(c(),p(rt,{key:f,class:it([`bg-${f}-darken-1`,{"ml-2":w>0}]),onClick:L=>y(f)},{default:l(()=>[S(r(A,{start:"",size:"large",color:"white"},{default:l(()=>[Vt]),_:2},1536),[[j,i.status]]),V("span",yt,m(i.count),1)]),_:2},1032,["class","onClick"]))),128)):k("v-if",!0),r(tt,{modelValue:t.value,"onUpdate:modelValue":e[0]||(e[0]=i=>t.value=i),label:"Map View",color:"info","hide-details":"",class:"pl-3"},null,8,["modelValue"])]),(c(),p(st,null,[(c(),p(et(u(a)),{data:u(_),"bottom-sheet-height":140},{"bottom-sheet":l(({data:i})=>[i?(c(),h("div",wt,[r(z,{item:i},null,8,["item"])])):k("v-if",!0)]),_:1},8,["data"]))],1024)),u(s).loading?(c(),p(at,{key:0,class:"position-absolute",style:{top:"38%",left:"46%","z-index":"9999"},indeterminate:"",color:"green"})):k("v-if",!0)],64))}});var Dt=b(It,[["__file","D:/tapp/ftma_app2/src/views/Tasks/index.vue"]]);export{Dt as default};
